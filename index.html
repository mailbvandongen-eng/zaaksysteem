<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zaaksysteem Keten - Gemeente Westland</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Animatie voor flow lijnen */
        @keyframes flowLine {
            from { stroke-dashoffset: 18; }
            to { stroke-dashoffset: 0; }
        }
        .flow-line {
            animation: flowLine 0.6s linear infinite;
        }

        .perspective-cards {
            display: flex;
            gap: 0.75rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        .perspective-card {
            padding: 0.75rem 1.25rem;
            background: var(--white);
            border: 1px solid var(--gray);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s;
        }
        .perspective-card:hover {
            border-color: var(--primary-light);
        }
        .perspective-card.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        .perspective-card h5 {
            font-size: 0.95rem;
            margin: 0;
        }

        /* Submenu voor keuzes */
        .submenu {
            display: none;
            margin-top: 1rem;
            padding: 1rem;
            background: var(--gray-light);
            border-radius: 8px;
        }
        .submenu.visible {
            display: block;
        }
        .submenu-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text);
            font-size: 0.9rem;
        }
        .submenu-options {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        .submenu-option {
            padding: 0.6rem 1.25rem;
            background: var(--white);
            border: 1px solid var(--gray);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.15s;
        }
        .submenu-option:hover {
            border-color: var(--primary-light);
        }
        .submenu-option.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Flow diagrams */
        .flow-container {
            background: var(--white);
            border: 1px solid var(--gray);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        .flow-container h3 {
            color: var(--primary);
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        /* Perspective flow - simpele horizontale weergave */
        .perspective-flow {
            display: none;
            padding: 2rem 1rem;
        }
        .perspective-flow.visible {
            display: block;
        }
        .perspective-flow svg {
            width: 100%;
            max-width: 1000px;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        /* Flow beschrijving */
        .flow-description {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #f0f7ed;
            border-left: 3px solid var(--primary);
            border-radius: 0 6px 6px 0;
            font-size: 0.9rem;
        }

        /* Enable-U popup */
        .eu-info {
            display: none;
            margin-top: 1rem;
            padding: 1.5rem;
            background: var(--white);
            border: 1px solid var(--gray);
            border-radius: 8px;
        }
        .eu-info.visible {
            display: block;
        }
        .eu-info h4 {
            color: var(--primary);
            margin-bottom: 1rem;
        }
        .eu-diagram {
            background: var(--gray-light);
            padding: 1.5rem;
            border-radius: 6px;
            text-align: center;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="https://www.gemeentewestland.nl/fileadmin/Gemeente_Westland/site_assets/logowestland.svg" alt="Gemeente Westland">
        </div>
        <h1>Zaaksysteem Ketenvisualisatie</h1>
    </header>

    <nav>
        <ul>
            <li><a href="index.html" class="active">Overzicht</a></li>
            <li><a href="perspectief/behandelaar.html">Behandelaar</a></li>
            <li><a href="perspectief/aanvrager.html">Aanvrager</a></li>
            <li><a href="perspectief/kcc.html">KCC</a></li>
            <li><a href="implementatie/7-vinkjes.html">7 Vinkjes</a></li>
            <li><a href="componenten/systemen.html">Systemen</a></li>
        </ul>
    </nav>

    <main>
        <!-- Perspective switcher -->
        <section>
            <h3>Bekijk de keten vanuit een perspectief</h3>
            <div class="perspective-cards">
                <div class="perspective-card" data-perspective="overzicht">
                    <h5>Overzicht</h5>
                </div>
                <div class="perspective-card" data-perspective="aanvrager">
                    <h5>Aanvrager</h5>
                </div>
                <div class="perspective-card" data-perspective="behandelaar">
                    <h5>Behandelaar</h5>
                </div>
                <div class="perspective-card" data-perspective="kcc">
                    <h5>KCC</h5>
                </div>
                <div class="perspective-card" data-perspective="registratie">
                    <h5>Team Registratie</h5>
                </div>
            </div>

            <!-- Submenu's voor specifieke flows -->
            <div id="submenu-aanvrager" class="submenu">
                <div class="submenu-title">Kies een domein:</div>
                <div class="submenu-options">
                    <div class="submenu-option" data-flow="aanvrager-sd">Sociaal Domein (WMO, GPK)</div>
                    <div class="submenu-option" data-flow="aanvrager-bz">Burgerzaken (eDiensten)</div>
                </div>
            </div>

            <div id="submenu-behandelaar" class="submenu">
                <div class="submenu-title">Kies een stap in het proces:</div>
                <div class="submenu-options">
                    <div class="submenu-option" data-flow="beh-1">1. Zaak oppakken</div>
                    <div class="submenu-option" data-flow="beh-2">2. In behandeling</div>
                    <div class="submenu-option" data-flow="beh-3">3. Stukken opvragen</div>
                    <div class="submenu-option" data-flow="beh-4">4. Stukken ontvangen</div>
                    <div class="submenu-option" data-flow="beh-5">5. Zaak afsluiten</div>
                </div>
            </div>

            <div id="submenu-kcc" class="submenu">
                <div class="submenu-title">Kies een scenario:</div>
                <div class="submenu-options">
                    <div class="submenu-option" data-flow="kcc-1">Klant belt voor status</div>
                    <div class="submenu-option" data-flow="kcc-2">Terugbelverzoek</div>
                </div>
            </div>

            <div id="submenu-registratie" class="submenu">
                <div class="submenu-title">Post verwerking:</div>
                <div class="submenu-options">
                    <div class="submenu-option" data-flow="reg-1">Post scannen en toewijzen</div>
                </div>
            </div>
        </section>

        <!-- OVERZICHT DIAGRAM -->
        <section class="flow-container" id="main-diagram">
            <h3>De Zaaksysteem Keten</h3>
            <div class="flow-diagram">
                <svg viewBox="0 0 1100 450" xmlns="http://www.w3.org/2000/svg">
                    <!-- Achtergrond kolommen -->
                    <rect x="20" y="30" width="180" height="400" fill="#E8F5E9" rx="8" opacity="0.5"/>
                    <text x="110" y="55" text-anchor="middle" font-size="12" fill="#44772C" font-weight="600">KANALEN</text>

                    <rect x="220" y="30" width="160" height="400" fill="#E3F2FD" rx="8" opacity="0.5"/>
                    <text x="300" y="55" text-anchor="middle" font-size="12" fill="#1976D2" font-weight="600">INTAKE</text>

                    <rect x="400" y="30" width="240" height="400" fill="#FFF3E0" rx="8" opacity="0.5"/>
                    <text x="520" y="55" text-anchor="middle" font-size="12" fill="#E65100" font-weight="600">VERWERKING</text>

                    <rect x="660" y="30" width="80" height="400" fill="#ECEFF1" rx="8" opacity="0.3"/>
                    <text x="700" y="55" text-anchor="middle" font-size="10" fill="#607D8B" font-weight="500">API</text>

                    <rect x="760" y="30" width="160" height="400" fill="#F3E5F5" rx="8" opacity="0.5"/>
                    <text x="840" y="55" text-anchor="middle" font-size="12" fill="#7B1FA2" font-weight="600">TERUGKOPPELING</text>

                    <rect x="940" y="30" width="140" height="400" fill="#E0F7FA" rx="8" opacity="0.5"/>
                    <text x="1010" y="55" text-anchor="middle" font-size="12" fill="#00838F" font-weight="600">INZICHT</text>
                    <!-- KANALEN -->
                    <g class="node">
                        <rect x="40" y="80" width="140" height="45" fill="#4CAF50" rx="6"/>
                        <text x="110" y="107" text-anchor="middle" fill="white" font-size="11" font-weight="500">gemeentewestland.nl</text>
                    </g>
                    <g class="node">
                        <rect x="40" y="140" width="140" height="45" fill="#66BB6A" rx="6"/>
                        <text x="110" y="167" text-anchor="middle" fill="white" font-size="11" font-weight="500">Balie</text>
                    </g>
                    <g class="node">
                        <rect x="40" y="200" width="140" height="45" fill="#81C784" rx="6"/>
                        <text x="110" y="227" text-anchor="middle" fill="white" font-size="11" font-weight="500">Telefoon</text>
                    </g>
                    <g class="node">
                        <rect x="40" y="260" width="140" height="45" fill="#A5D6A7" rx="6"/>
                        <text x="110" y="287" text-anchor="middle" fill="#333" font-size="11" font-weight="500">Post / Scan</text>
                    </g>

                    <!-- INTAKE -->
                    <g class="node">
                        <rect x="240" y="80" width="120" height="45" fill="#2196F3" rx="6"/>
                        <text x="300" y="107" text-anchor="middle" fill="white" font-size="11" font-weight="500">SIMform</text>
                    </g>
                    <g class="node">
                        <rect x="240" y="140" width="120" height="45" fill="#42A5F5" rx="6"/>
                        <text x="300" y="167" text-anchor="middle" fill="white" font-size="11" font-weight="500">Centric eDiensten</text>
                    </g>
                    <g class="node">
                        <rect x="240" y="200" width="120" height="45" fill="#FF5722" rx="6"/>
                        <text x="300" y="227" text-anchor="middle" fill="white" font-size="11" font-weight="500">DigiD</text>
                    </g>
                    <g class="node">
                        <rect x="240" y="260" width="120" height="45" fill="#FF7043" rx="6"/>
                        <text x="300" y="280" text-anchor="middle" fill="white" font-size="10" font-weight="500">eHerkenning</text>
                        <text x="300" y="293" text-anchor="middle" fill="white" font-size="8">(binnenkort)</text>
                    </g>

                    <!-- VERWERKING -->
                    <g class="node">
                        <rect x="420" y="100" width="200" height="60" fill="#44772C" rx="8"/>
                        <text x="520" y="128" text-anchor="middle" fill="white" font-size="13" font-weight="600">Rx.Enterprise</text>
                        <text x="520" y="145" text-anchor="middle" fill="white" font-size="10">Zaaksysteem + Documenten</text>
                    </g>
                    <g class="node">
                        <rect x="420" y="200" width="95" height="45" fill="#FF9800" rx="6"/>
                        <text x="467" y="220" text-anchor="middle" fill="white" font-size="10" font-weight="500">Centric BZ</text>
                        <text x="467" y="235" text-anchor="middle" fill="white" font-size="9">Burgerzaken</text>
                    </g>
                    <g class="node">
                        <rect x="525" y="200" width="95" height="45" fill="#FFA726" rx="6"/>
                        <text x="572" y="220" text-anchor="middle" fill="white" font-size="10" font-weight="500">Suite4SD</text>
                        <text x="572" y="235" text-anchor="middle" fill="white" font-size="9">Sociaal Domein</text>
                    </g>
                    <g class="node">
                        <rect x="420" y="260" width="95" height="40" fill="#FFB74D" rx="6"/>
                        <text x="467" y="285" text-anchor="middle" fill="#333" font-size="10" font-weight="500">Stratech</text>
                    </g>
                    <g class="node" style="opacity:0.6">
                        <rect x="525" y="260" width="95" height="40" fill="#FFE0B2" rx="6" stroke="#FF9800" stroke-dasharray="3"/>
                        <text x="572" y="282" text-anchor="middle" fill="#666" font-size="9">Toekomstig</text>
                    </g>

                    <!-- ENABLE-U (API Gateway) - klikbaar -->
                    <g class="node node-eu" id="enable-u-node" style="cursor:pointer">
                        <rect x="670" y="110" width="60" height="180" fill="#B0BEC5" rx="4"/>
                        <text x="700" y="200" text-anchor="middle" fill="#455A64" font-size="9" font-weight="500" transform="rotate(-90 700 200)">Enable-U</text>
                    </g>

                    <!-- TERUGKOPPELING -->
                    <g class="node">
                        <rect x="780" y="80" width="120" height="50" fill="#9C27B0" rx="6"/>
                        <text x="840" y="102" text-anchor="middle" fill="white" font-size="12" font-weight="500">PIP</text>
                        <text x="840" y="118" text-anchor="middle" fill="white" font-size="9">(binnenkort live)</text>
                    </g>
                    <g class="node">
                        <rect x="780" y="145" width="120" height="40" fill="#BA68C8" rx="6"/>
                        <text x="840" y="170" text-anchor="middle" fill="white" font-size="10" font-weight="500">Notificaties</text>
                    </g>

                    <!-- INZICHT -->
                    <g class="node">
                        <rect x="960" y="80" width="100" height="50" fill="#00BCD4" rx="6"/>
                        <text x="1010" y="102" text-anchor="middle" fill="white" font-size="11" font-weight="500">Rx.Front</text>
                        <text x="1010" y="118" text-anchor="middle" fill="white" font-size="9">KCC</text>
                    </g>
                    <g class="node">
                        <rect x="960" y="145" width="100" height="40" fill="#26C6DA" rx="6"/>
                        <text x="1010" y="170" text-anchor="middle" fill="white" font-size="10" font-weight="500">PowerBI</text>
                    </g>

                </svg>
            </div>

            <!-- Enable-U info popup -->
            <div id="eu-info" class="eu-info">
                <h3 style="color: var(--primary); margin-bottom: 1rem;">Enable-U API Gateway</h3>
                <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">
                    De API Gateway bepaalt wat de aanvrager ziet op de PIP. Het werkt als een filter tussen het zaaksysteem en de burger.
                </p>

                <!-- Diagram -->
                <div style="background: var(--gray-light); padding: 2rem; border-radius: 8px; margin-bottom: 2rem;">
                    <svg viewBox="0 0 600 100" style="width: 100%; max-width: 700px; display: block; margin: 0 auto;">
                        <style>
                            @keyframes dash { to { stroke-dashoffset: -12; } }
                            .animated-line { animation: dash 0.5s linear infinite; }
                        </style>
                        <rect x="20" y="25" width="140" height="50" fill="#44772C" rx="6"/>
                        <text x="90" y="55" text-anchor="middle" fill="white" font-size="14" font-weight="500">Rx.Enterprise</text>

                        <rect x="230" y="15" width="140" height="70" fill="#B0BEC5" rx="6"/>
                        <text x="300" y="45" text-anchor="middle" fill="#333" font-size="14" font-weight="600">Enable-U</text>
                        <text x="300" y="65" text-anchor="middle" fill="#555" font-size="12">API Gateway</text>

                        <rect x="440" y="25" width="140" height="50" fill="#9C27B0" rx="6"/>
                        <text x="510" y="55" text-anchor="middle" fill="white" font-size="14" font-weight="500">PIP</text>

                        <line class="animated-line" x1="160" y1="50" x2="230" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="8,4"/>
                        <line class="animated-line" x1="370" y1="50" x2="440" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="8,4"/>
                    </svg>
                </div>

                <!-- Uitleg hoe het filter werkt -->
                <h4 style="margin-bottom: 1rem;">Hoe werkt het filter?</h4>

                <div style="display: grid; gap: 1rem; margin-bottom: 2rem;">
                    <div style="background: #FFF3E0; padding: 1rem; border-radius: 6px; border-left: 4px solid #FF9800;">
                        <strong>Niets ingericht = niets zichtbaar</strong><br>
                        Een zaaktype dat niet is toegevoegd aan het filter is onzichtbaar op de PIP.
                    </div>

                    <div style="background: #E3F2FD; padding: 1rem; border-radius: 6px; border-left: 4px solid #2196F3;">
                        <strong>Zaaktype toegevoegd = zaak zichtbaar, maar nog geen documenten</strong><br>
                        Als je een zaaktype toevoegt, ziet de burger de zaak. Maar documenten zijn nog niet zichtbaar.
                    </div>

                    <div style="background: #E8F5E9; padding: 1rem; border-radius: 6px; border-left: 4px solid #4CAF50;">
                        <strong>Documenttype toegevoegd = document zichtbaar</strong><br>
                        Alleen documenttypen die zijn ingericht worden getoond. De rest blijft verborgen (zoals concept-beschikkingen).
                    </div>
                </div>

                <!-- Wat is wel/niet zichtbaar -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                    <div style="background: #E8F5E9; padding: 1.25rem; border-radius: 8px;">
                        <h5 style="color: #2E7D32; margin-bottom: 0.75rem;">Meestal zichtbaar</h5>
                        <ul style="margin: 0; padding-left: 1.25rem; color: #333;">
                            <li>Aanvragen</li>
                            <li>Beschikkingen</li>
                            <li>Eigen uploads van de burger</li>
                        </ul>
                    </div>
                    <div style="background: #FFEBEE; padding: 1.25rem; border-radius: 8px;">
                        <h5 style="color: #C62828; margin-bottom: 0.75rem;">Meestal verborgen</h5>
                        <ul style="margin: 0; padding-left: 1.25rem; color: #333;">
                            <li>Concept-beschikkingen</li>
                            <li>Interne notities</li>
                            <li>Adviezen van derden</li>
                        </ul>
                    </div>
                </div>

                <!-- Belangrijk om te weten -->
                <div style="background: #FFF8E1; padding: 1.25rem; border-radius: 8px; border: 1px solid #FFE082; margin-bottom: 1.5rem;">
                    <h5 style="color: #F57F17; margin-bottom: 0.5rem;">Belangrijk om te weten</h5>
                    <p style="margin: 0; color: #333;">
                        Op dit moment geldt een documenttype voor <strong>alle zaaktypen</strong>. Als je een documenttype openzet, is het zichtbaar bij elke zaak.
                        Daarom is het belangrijk om <strong>vooraf per zaaktype te bespreken</strong> welke documenttypen zichtbaar moeten zijn.
                    </p>
                </div>

                <!-- Toekomst -->
                <div style="background: #E3F2FD; padding: 1.25rem; border-radius: 8px; border: 1px solid #90CAF9;">
                    <h5 style="color: #1565C0; margin-bottom: 0.5rem;">Binnenkort</h5>
                    <p style="margin: 0; color: #333;">
                        Het filter wordt uitgebreid. Straks kun je <strong>per zaaktype</strong> bepalen welke documenttypen zichtbaar zijn op de PIP.
                    </p>
                </div>
            </div>
        </section>

        <!-- PERSPECTIEF FLOWS (verborgen tot selectie) -->
        <section class="flow-container" id="perspective-diagram" style="display:none">
            <h3 id="perspective-title">Flow</h3>
            <div class="perspective-flow visible" id="current-flow">
                <!-- Dynamisch gevuld door JavaScript -->
            </div>
            <div class="flow-description" id="flow-description">
                <!-- Dynamisch gevuld door JavaScript -->
            </div>
        </section>

        <!-- Quick actions -->
        <section id="quick-actions">
            <h3>Snel naar</h3>
            <div class="cards">
                <a href="perspectief/behandelaar.html" class="card">
                    <h4>Wat verandert er voor mij?</h4>
                    <p>Als behandelaar werk je straks in de keten. Ontdek wat dit betekent.</p>
                </a>
                <a href="implementatie/7-vinkjes.html" class="card">
                    <h4>De 7 Vinkjes</h4>
                    <p>Hoe wordt een nieuw zaaktype aangesloten? Bekijk het implementatieproces.</p>
                </a>
                <a href="perspectief/aanvrager.html" class="card">
                    <h4>Vanuit de burger gezien</h4>
                    <p>Volg een aanvraag van begin tot eind vanuit het perspectief van de aanvrager.</p>
                </a>
                <a href="componenten/systemen.html" class="card">
                    <h4>Alle systemen</h4>
                    <p>Overzicht van alle componenten in de keten en hun functie.</p>
                </a>
            </div>
        </section>

        <!-- Info box -->
        <section id="info-section">
            <div class="info-box success">
                <strong>GPK is live!</strong> De Gehandicaptenparkeerkaart is het eerste zaaktype uit het Sociaal Domein dat volledig zaakgericht werkt. De PIP wordt binnenkort gelanceerd.
            </div>
        </section>
    </main>

    <footer>
        <p>Zaaksysteem Ketenvisualisatie - Gemeente Westland</p>
    </footer>

    <script src="js/flow.js"></script>
    <script>
        // Flow configuraties - elke flow heeft eigen SVG en beschrijving
        const flowConfigs = {
            // ===== AANVRAGER FLOWS =====
            'aanvrager-sd': {
                title: 'Aanvrager - Sociaal Domein (WMO, GPK)',
                description: 'De burger vult een formulier in op gemeentewestland.nl, logt in met DigiD, de aanvraag komt in Rx.Enterprise, wordt behandeld in Suite4SD, en de burger kan de status volgen via de PIP.',
                svg: `
                    <svg viewBox="0 0 800 100">
                        <style>
                            @keyframes flow { to { stroke-dashoffset: -9; } }
                            .anim { animation: flow 0.4s linear infinite; }
                        </style>
                        <!-- Blokken -->
                        <rect x="20" y="25" width="100" height="50" fill="#4CAF50" rx="6"/>
                        <text x="70" y="55" text-anchor="middle" fill="white" font-size="9">gemeentewestland.nl</text>

                        <rect x="140" y="25" width="60" height="50" fill="#2196F3" rx="6"/>
                        <text x="170" y="55" text-anchor="middle" fill="white" font-size="10">SIMform</text>

                        <rect x="220" y="25" width="60" height="50" fill="#FF5722" rx="6"/>
                        <text x="250" y="55" text-anchor="middle" fill="white" font-size="10">DigiD</text>

                        <rect x="300" y="25" width="80" height="50" fill="#44772C" rx="6"/>
                        <text x="340" y="55" text-anchor="middle" fill="white" font-size="9">Rx.Enterprise</text>

                        <rect x="400" y="25" width="70" height="50" fill="#FFA726" rx="6"/>
                        <text x="435" y="55" text-anchor="middle" fill="white" font-size="10">Suite4SD</text>

                        <rect x="490" y="25" width="60" height="50" fill="#B0BEC5" rx="4"/>
                        <text x="520" y="55" text-anchor="middle" fill="#333" font-size="9">Enable-U</text>

                        <rect x="570" y="25" width="50" height="50" fill="#9C27B0" rx="6"/>
                        <text x="595" y="55" text-anchor="middle" fill="white" font-size="10">PIP</text>

                        <!-- Flow lijn (bovenop) -->
                        <line class="anim" x1="120" y1="50" x2="140" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="200" y1="50" x2="220" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="280" y1="50" x2="300" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="380" y1="50" x2="400" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="470" y1="50" x2="490" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="550" y1="50" x2="570" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                    </svg>`
            },
            'aanvrager-bz': {
                title: 'Aanvrager - Burgerzaken (eDiensten)',
                description: 'De burger vraagt een dienst aan via Centric eDiensten (bijv. uittreksel BRP, adreswijziging), logt in met DigiD, Centric Burgerzaken verwerkt de aanvraag, dit synchroniseert naar Rx.Enterprise, en de status wordt zichtbaar in de PIP.',
                svg: `
                    <svg viewBox="0 0 800 100">
                        <style>
                            @keyframes flow { to { stroke-dashoffset: -9; } }
                            .anim { animation: flow 0.4s linear infinite; }
                        </style>
                        <!-- Blokken -->
                        <rect x="20" y="25" width="100" height="50" fill="#4CAF50" rx="6"/>
                        <text x="70" y="55" text-anchor="middle" fill="white" font-size="9">gemeentewestland.nl</text>

                        <rect x="140" y="25" width="70" height="50" fill="#42A5F5" rx="6"/>
                        <text x="175" y="55" text-anchor="middle" fill="white" font-size="9">eDiensten</text>

                        <rect x="230" y="25" width="60" height="50" fill="#FF5722" rx="6"/>
                        <text x="260" y="55" text-anchor="middle" fill="white" font-size="10">DigiD</text>

                        <rect x="310" y="25" width="80" height="50" fill="#FF9800" rx="6"/>
                        <text x="350" y="55" text-anchor="middle" fill="white" font-size="9">Centric BZ</text>

                        <rect x="410" y="25" width="80" height="50" fill="#44772C" rx="6"/>
                        <text x="450" y="55" text-anchor="middle" fill="white" font-size="9">Rx.Enterprise</text>

                        <rect x="510" y="25" width="60" height="50" fill="#B0BEC5" rx="4"/>
                        <text x="540" y="55" text-anchor="middle" fill="#333" font-size="9">Enable-U</text>

                        <rect x="590" y="25" width="50" height="50" fill="#9C27B0" rx="6"/>
                        <text x="615" y="55" text-anchor="middle" fill="white" font-size="10">PIP</text>

                        <!-- Flow lijn (bovenop) -->
                        <line class="anim" x1="120" y1="50" x2="140" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="210" y1="50" x2="230" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="290" y1="50" x2="310" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="390" y1="50" x2="410" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="490" y1="50" x2="510" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="570" y1="50" x2="590" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                    </svg>`
            },
            // ===== BEHANDELAAR FLOWS =====
            'beh-1': {
                title: 'Behandelaar - Zaak oppakken',
                description: 'De behandelaar ziet een nieuwe zaak in de werkvoorraad van het afhandelsysteem en pakt deze op.',
                svg: `
                    <svg viewBox="0 0 600 100">
                        <rect x="220" y="25" width="100" height="50" fill="#FFA726" rx="6"/>
                        <text x="270" y="45" text-anchor="middle" fill="white" font-size="10">Suite4SD</text>
                        <text x="270" y="60" text-anchor="middle" fill="white" font-size="8">werkvoorraad</text>
                    </svg>`
            },
            'beh-2': {
                title: 'Behandelaar - Status "In behandeling"',
                description: 'De behandelaar zet de status op "In behandeling" in Suite4SD. Dit synchroniseert naar Rx.Enterprise en de aanvrager krijgt automatisch een notificatie en kan zijn aanvraag in de PIP volgen.',
                svg: `
                    <svg viewBox="0 0 600 100">
                        <style>@keyframes flow{to{stroke-dashoffset:-9}}.anim{animation:flow .4s linear infinite}</style>
                        <rect x="20" y="25" width="100" height="50" fill="#FFA726" rx="6"/>
                        <text x="70" y="55" text-anchor="middle" fill="white" font-size="10">Suite4SD</text>
                        <rect x="170" y="25" width="100" height="50" fill="#44772C" rx="6"/>
                        <text x="220" y="55" text-anchor="middle" fill="white" font-size="10">Rx.Enterprise</text>
                        <rect x="320" y="25" width="100" height="50" fill="#BA68C8" rx="6"/>
                        <text x="370" y="55" text-anchor="middle" fill="white" font-size="10">Notificatie</text>
                        <rect x="470" y="25" width="100" height="50" fill="#9C27B0" rx="6"/>
                        <text x="520" y="55" text-anchor="middle" fill="white" font-size="10">PIP</text>
                        <line class="anim" x1="120" y1="50" x2="170" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="270" y1="50" x2="320" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="420" y1="50" x2="470" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                    </svg>`
            },
            'beh-3': {
                title: 'Behandelaar - Aanvullende stukken opvragen',
                description: 'De behandelaar heeft extra documenten nodig. Een verzoek gaat via notificatie naar de aanvrager, die dit ziet in de PIP.',
                svg: `
                    <svg viewBox="0 0 600 100">
                        <style>@keyframes flow{to{stroke-dashoffset:-9}}.anim{animation:flow .4s linear infinite}</style>
                        <rect x="70" y="25" width="100" height="50" fill="#FFA726" rx="6"/>
                        <text x="120" y="55" text-anchor="middle" fill="white" font-size="10">Suite4SD</text>
                        <rect x="220" y="25" width="100" height="50" fill="#BA68C8" rx="6"/>
                        <text x="270" y="45" text-anchor="middle" fill="white" font-size="9">Notificatie</text>
                        <text x="270" y="60" text-anchor="middle" fill="white" font-size="8">"stukken nodig"</text>
                        <rect x="370" y="25" width="100" height="50" fill="#9C27B0" rx="6"/>
                        <text x="420" y="55" text-anchor="middle" fill="white" font-size="10">PIP</text>
                        <line class="anim" x1="170" y1="50" x2="220" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="320" y1="50" x2="370" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                    </svg>`
            },
            'beh-4': {
                title: 'Behandelaar - Stukken ontvangen',
                description: 'De aanvrager uploadt documenten via de PIP. Deze komen in Rx.Enterprise en de behandelaar ziet een melding in Suite4SD.',
                svg: `
                    <svg viewBox="0 0 600 100">
                        <style>@keyframes flow{to{stroke-dashoffset:-9}}.anim{animation:flow .4s linear infinite}</style>
                        <rect x="20" y="25" width="100" height="50" fill="#9C27B0" rx="6"/>
                        <text x="70" y="45" text-anchor="middle" fill="white" font-size="10">PIP</text>
                        <text x="70" y="60" text-anchor="middle" fill="white" font-size="8">upload</text>
                        <rect x="170" y="25" width="100" height="50" fill="#44772C" rx="6"/>
                        <text x="220" y="55" text-anchor="middle" fill="white" font-size="10">Rx.Enterprise</text>
                        <rect x="320" y="25" width="100" height="50" fill="#BA68C8" rx="6"/>
                        <text x="370" y="55" text-anchor="middle" fill="white" font-size="10">Melding</text>
                        <rect x="470" y="25" width="100" height="50" fill="#FFA726" rx="6"/>
                        <text x="520" y="55" text-anchor="middle" fill="white" font-size="10">Suite4SD</text>
                        <line class="anim" x1="120" y1="50" x2="170" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="270" y1="50" x2="320" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="420" y1="50" x2="470" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                    </svg>`
            },
            'beh-5': {
                title: 'Behandelaar - Zaak afsluiten',
                description: 'De behandelaar sluit de zaak af in Suite4SD met een beschikking. Status gaat naar Rx.Enterprise, notificatie naar aanvrager, beschikking zichtbaar in PIP.',
                svg: `
                    <svg viewBox="0 0 770 100">
                        <style>@keyframes flow{to{stroke-dashoffset:-9}}.anim{animation:flow .4s linear infinite}</style>
                        <rect x="20" y="25" width="100" height="50" fill="#FFA726" rx="6"/>
                        <text x="70" y="45" text-anchor="middle" fill="white" font-size="10">Suite4SD</text>
                        <text x="70" y="60" text-anchor="middle" fill="white" font-size="8">afsluiten</text>
                        <rect x="170" y="25" width="100" height="50" fill="#44772C" rx="6"/>
                        <text x="220" y="55" text-anchor="middle" fill="white" font-size="10">Rx.Enterprise</text>
                        <rect x="320" y="25" width="100" height="50" fill="#B0BEC5" rx="4"/>
                        <text x="370" y="55" text-anchor="middle" fill="#333" font-size="10">Enable-U</text>
                        <rect x="470" y="25" width="100" height="50" fill="#BA68C8" rx="6"/>
                        <text x="520" y="55" text-anchor="middle" fill="white" font-size="10">Notificatie</text>
                        <rect x="620" y="25" width="100" height="50" fill="#9C27B0" rx="6"/>
                        <text x="670" y="55" text-anchor="middle" fill="white" font-size="10">PIP</text>
                        <line class="anim" x1="120" y1="50" x2="170" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="270" y1="50" x2="320" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="420" y1="50" x2="470" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="570" y1="50" x2="620" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                    </svg>`
            },
            // ===== KCC FLOWS =====
            'kcc-1': {
                title: 'KCC - Klant belt voor status',
                description: 'Een burger belt het KCC. De medewerker zoekt op BSN in Rx.Front en ziet direct alle zaken, de status en wie de behandelaar is.',
                svg: `
                    <svg viewBox="0 0 600 100">
                        <style>@keyframes flow{to{stroke-dashoffset:-9}}.anim{animation:flow .4s linear infinite}</style>
                        <rect x="70" y="25" width="100" height="50" fill="#81C784" rx="6"/>
                        <text x="120" y="45" text-anchor="middle" fill="white" font-size="10">Telefoon</text>
                        <text x="120" y="60" text-anchor="middle" fill="white" font-size="8">burger belt</text>
                        <rect x="220" y="25" width="100" height="50" fill="#00BCD4" rx="6"/>
                        <text x="270" y="45" text-anchor="middle" fill="white" font-size="10">Rx.Front</text>
                        <text x="270" y="60" text-anchor="middle" fill="white" font-size="8">zoek op BSN</text>
                        <rect x="370" y="25" width="100" height="50" fill="#44772C" rx="6"/>
                        <text x="420" y="45" text-anchor="middle" fill="white" font-size="10">Rx.Enterprise</text>
                        <text x="420" y="60" text-anchor="middle" fill="white" font-size="8">alle zaken</text>
                        <line class="anim" x1="170" y1="50" x2="220" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="320" y1="50" x2="370" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                    </svg>`
            },
            'kcc-2': {
                title: 'KCC - Terugbelverzoek',
                description: 'Het KCC ziet wie de behandelaar is en plant een terugbelverzoek in. Dit wordt gelogd in het systeem.',
                svg: `
                    <svg viewBox="0 0 600 100">
                        <style>@keyframes flow{to{stroke-dashoffset:-9}}.anim{animation:flow .4s linear infinite}</style>
                        <rect x="70" y="25" width="100" height="50" fill="#00BCD4" rx="6"/>
                        <text x="120" y="45" text-anchor="middle" fill="white" font-size="10">Rx.Front</text>
                        <text x="120" y="60" text-anchor="middle" fill="white" font-size="8">KCC</text>
                        <rect x="220" y="25" width="100" height="50" fill="#26C6DA" rx="6"/>
                        <text x="270" y="45" text-anchor="middle" fill="white" font-size="9">Terugbelverzoek</text>
                        <text x="270" y="60" text-anchor="middle" fill="white" font-size="8">naar behandelaar</text>
                        <rect x="370" y="25" width="100" height="50" fill="#44772C" rx="6"/>
                        <text x="420" y="55" text-anchor="middle" fill="white" font-size="10">Rx.Enterprise</text>
                        <line class="anim" x1="170" y1="50" x2="220" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="320" y1="50" x2="370" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                    </svg>`
            },
            // ===== REGISTRATIE FLOW =====
            'reg-1': {
                title: 'Team Registratie - Post verwerken',
                description: 'Post komt binnen, wordt gescand, komt in de werkvoorraad van Rx.Enterprise en wordt toegewezen aan de juiste behandelaar.',
                svg: `
                    <svg viewBox="0 0 600 100">
                        <style>@keyframes flow{to{stroke-dashoffset:-9}}.anim{animation:flow .4s linear infinite}</style>
                        <rect x="20" y="25" width="100" height="50" fill="#A5D6A7" rx="6"/>
                        <text x="70" y="55" text-anchor="middle" fill="#333" font-size="10">Post</text>
                        <rect x="170" y="25" width="100" height="50" fill="#78909C" rx="6"/>
                        <text x="220" y="55" text-anchor="middle" fill="white" font-size="10">Scannen</text>
                        <rect x="320" y="25" width="100" height="50" fill="#44772C" rx="6"/>
                        <text x="370" y="45" text-anchor="middle" fill="white" font-size="10">Rx.Enterprise</text>
                        <text x="370" y="60" text-anchor="middle" fill="white" font-size="8">werkvoorraad</text>
                        <rect x="470" y="25" width="100" height="50" fill="#FFA726" rx="6"/>
                        <text x="520" y="45" text-anchor="middle" fill="white" font-size="10">Behandelaar</text>
                        <text x="520" y="60" text-anchor="middle" fill="white" font-size="8">toewijzing</text>
                        <line class="anim" x1="120" y1="50" x2="170" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="270" y1="50" x2="320" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                        <line class="anim" x1="420" y1="50" x2="470" y2="50" stroke="#74B943" stroke-width="3" stroke-dasharray="6,3"/>
                    </svg>`
            }
        };

        // DOM elements
        const mainDiagram = document.getElementById('main-diagram');
        const perspectiveDiagram = document.getElementById('perspective-diagram');
        const perspectiveTitle = document.getElementById('perspective-title');
        const currentFlow = document.getElementById('current-flow');
        const flowDescription = document.getElementById('flow-description');
        const euInfo = document.getElementById('eu-info');
        const quickActions = document.getElementById('quick-actions');
        const infoSection = document.getElementById('info-section');

        // Hide all submenus
        function hideAllSubmenus() {
            document.querySelectorAll('.submenu').forEach(s => s.classList.remove('visible'));
            document.querySelectorAll('.submenu-option').forEach(o => o.classList.remove('active'));
        }

        // Show main diagram (overzicht)
        function showMainDiagram() {
            mainDiagram.style.display = 'block';
            perspectiveDiagram.style.display = 'none';
            quickActions.style.display = 'block';
            infoSection.style.display = 'block';
            euInfo.classList.remove('visible');
        }

        // Show perspective diagram
        function showPerspectiveDiagram(flowKey) {
            const config = flowConfigs[flowKey];
            if (!config) return;

            mainDiagram.style.display = 'none';
            perspectiveDiagram.style.display = 'block';
            quickActions.style.display = 'none';
            infoSection.style.display = 'none';

            perspectiveTitle.textContent = config.title;
            currentFlow.innerHTML = config.svg;
            flowDescription.innerHTML = config.description;
        }

        // Perspective card clicks
        document.querySelectorAll('.perspective-card').forEach(card => {
            card.addEventListener('click', function() {
                const perspective = this.dataset.perspective;

                // Update active state
                document.querySelectorAll('.perspective-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');

                // Hide all submenus first
                hideAllSubmenus();
                euInfo.classList.remove('visible');

                if (perspective === 'overzicht') {
                    showMainDiagram();
                } else {
                    // Show submenu for this perspective
                    const submenu = document.getElementById('submenu-' + perspective);
                    if (submenu) {
                        submenu.classList.add('visible');
                    }
                    // Hide main diagram, show only submenu
                    mainDiagram.style.display = 'none';
                    perspectiveDiagram.style.display = 'none';
                    quickActions.style.display = 'none';
                    infoSection.style.display = 'none';
                }
            });
        });

        // Submenu option clicks
        document.querySelectorAll('.submenu-option').forEach(option => {
            option.addEventListener('click', function() {
                const flowKey = this.dataset.flow;

                // Update active state
                document.querySelectorAll('.submenu-option').forEach(o => o.classList.remove('active'));
                this.classList.add('active');

                // Show the perspective diagram
                showPerspectiveDiagram(flowKey);
            });
        });

        // Enable-U click handler
        document.getElementById('enable-u-node').addEventListener('click', function() {
            euInfo.classList.toggle('visible');
        });

        // Initialize with overzicht active
        document.querySelector('[data-perspective="overzicht"]').classList.add('active');
    </script>
</body>
</html>
